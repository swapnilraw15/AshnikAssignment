# Ansible Playbook: Deploy Nginx Ingress and Sample Application on Kubernetes

This Ansible playbook automates the deployment of an Nginx Ingress controller and a sample "Hello World" application on a Kubernetes cluster. The playbook also implements TLS termination using a self-signed certificate.

Table of Contents
Requirements
Playbook Structure
Usage
Tasks Breakdown
Troubleshooting
Requirements
Kubernetes Cluster: Ensure you have a running Kubernetes cluster.
Ansible: Installed on your local machine or control node.
kubectl and Helm: Available on the machine running the playbook.
Access to the Kubernetes Cluster: Ensure you have cluster admin privileges.
Playbook Structure
deploy_k8s.yml: The main playbook file containing all tasks.
/tmp/hello-world-tls.yaml: Temporary manifest file generated by the playbook for deploying the sample application with TLS.
Usage
Clone the Repository:

bash
Copy code
git clone <repository_url>
cd <repository_directory>
Run the Playbook:

bash
Copy code
ansible-playbook deploy_k8s.yml
This command will execute all the tasks in the playbook, deploying the Nginx Ingress controller and the "Hello World" application with TLS.

Tasks Breakdown
1. Install Helm if not installed
Installs Helm if it's not already installed on the control node.
2. Add the Ingress-Nginx Helm Repo
Adds the official Helm repository for Nginx Ingress.
3. Uninstall Existing Nginx Ingress Release (If Exists)
Uninstalls any existing Nginx Ingress controller to prevent conflicts.
4. Install Nginx Ingress Controller
Deploys the Nginx Ingress controller in the ingress-nginx namespace.
5. Generate Self-Signed TLS Certificate
Creates a self-signed TLS certificate and key using OpenSSL.
6. Create Kubernetes Secret for TLS
Creates a Kubernetes secret to store the TLS certificate and key.
7. Ensure Nginx Ingress Controller and Webhook are Running
Checks the readiness of the Nginx Ingress controller and its admission webhook.
8. Create and Apply Kubernetes Manifest
Generates and applies a Kubernetes manifest for the "Hello World" application, including TLS configuration.
Troubleshooting
Error: cannot re-use a name that is still in use:

This occurs when a Helm release with the same name already exists. The playbook handles this by attempting to uninstall any existing release before deploying a new one.
Error: dial tcp <IP>:443: connect: connection refused:

This error indicates that the Nginx Ingress admission webhook is not ready. The playbook includes retries to handle this, but you may need to check the Nginx Ingress controller's status manually if the issue persists.
Certificate Issues:

Ensure that the self-signed certificate is correctly generated and applied as a Kubernetes secret.
